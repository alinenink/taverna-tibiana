"use strict";(self.webpackChunktaverna_tibiana=self.webpackChunktaverna_tibiana||[]).push([[205],{205:(f,d,o)=>{o.r(d),o.d(d,{LoginComponent:()=>v});var g=o(467),c=o(177),i=o(4341),m=o(6207),u=o(4796),e=o(4020);function _(t,h){if(1&t&&(e.j41(0,"div",16),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.erro)}}function p(t,h){1&t&&(e.j41(0,"div",17)(1,"div",18),e.qSk(),e.j41(2,"svg",19)(3,"g",20),e.nrm(4,"path",21),e.k0s()()()())}let v=(()=>{class t{constructor(n,s){this.router=n,this.authService=s,this.email="",this.password="",this.carregando=!1,this.erro=""}login(){var n=this;return(0,g.A)(function*(){n.carregando=!0,n.erro="";const s={email:n.email,password:n.password};try{(yield n.authService.authenticate(s)).subscribe({next:r=>{r.success&&r.token?(n.authService.setAuthData(r.token,r.user,r.user_id),n.carregando=!1,n.router.navigate(["/home"])):(n.erro=r.message||"Erro na autentica\xe7\xe3o. Verifique suas credenciais.",n.carregando=!1)},error:r=>{n.carregando=!1,console.error("Erro na autentica\xe7\xe3o:",r),n.erro=401===r.status?"\u{1f37a} Opa, nobre aventureiro! Tuas credenciais n\xe3o foram reconhecidas pelo taberneiro. Confere teu email m\xe1gico e tua palavra-passe, e tenta novamente!":"Erro ao conectar com o servidor. Tente novamente."}})}catch(a){n.carregando=!1,console.error("Erro ao processar autentica\xe7\xe3o:",a),n.erro="Erro interno. Tente novamente."}})()}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(m.Ix),e.rXU(u.u))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:25,vars:5,consts:[[1,"parchment-background"],[1,"consulta-layout"],[1,"tavernatibiana-title"],[1,"parchment-card",3,"ngSubmit"],["class","login-error",4,"ngIf"],[1,"input-icon-group"],["src","assets/wizard.svg","alt","Email",1,"svg-icon"],["id","email","type","email","name","email","placeholder","Email m\xe1gico","required","",1,"input-medieval",3,"ngModelChange","ngModel"],["src","assets/key-skills.svg","alt","Senha",1,"svg-icon"],["id","password","type","password","name","password","placeholder","Palavra-passe da Irmandade","required","",1,"input-medieval",3,"ngModelChange","ngModel"],["type","submit",1,"button-medieval",3,"disabled"],[1,"login-links"],["routerLink","/register",1,"medieval-link"],[1,"medieval-link-sep"],["routerLink","/forgot-password",1,"medieval-link"],["class","svg-loader-overlay",4,"ngIf"],[1,"login-error"],[1,"svg-loader-overlay"],[1,"svg-loader"],["fill","#000000","height","80px","width","80px","viewBox","0 0 452.022 452.022"],["id","SVGRepo_iconCarrier"],["d","..."]],template:function(s,a){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.EFF(3,"Bem-vindo \xe0 Taverna Tibiana"),e.k0s(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return a.login()}),e.j41(5,"h2"),e.EFF(6,"Juramento de Entrada"),e.k0s(),e.nrm(7,"hr"),e.DNE(8,_,2,1,"div",4),e.j41(9,"div",5),e.nrm(10,"img",6),e.j41(11,"input",7),e.mxI("ngModelChange",function(l){return e.DH7(a.email,l)||(a.email=l),l}),e.k0s()(),e.j41(12,"div",5),e.nrm(13,"img",8),e.j41(14,"input",9),e.mxI("ngModelChange",function(l){return e.DH7(a.password,l)||(a.password=l),l}),e.k0s()(),e.j41(15,"button",10),e.EFF(16," Adentrar a Taverna "),e.k0s(),e.j41(17,"div",11)(18,"a",12),e.EFF(19,"Alistar-se na Guilda"),e.k0s(),e.j41(20,"span",13),e.EFF(21,"|"),e.k0s(),e.j41(22,"a",14),e.EFF(23,"Esqueceste teu juramento?"),e.k0s()(),e.DNE(24,p,5,0,"div",15),e.k0s()()()),2&s&&(e.R7$(8),e.Y8G("ngIf",a.erro),e.R7$(3),e.R50("ngModel",a.email),e.R7$(3),e.R50("ngModel",a.password),e.R7$(),e.Y8G("disabled",a.carregando||!a.email||!a.password),e.R7$(9),e.Y8G("ngIf",a.carregando))},dependencies:[c.MD,c.bT,i.YN,i.qT,i.me,i.BC,i.cb,i.YS,i.vS,i.cV,m.iI,m.Wk],styles:[".consulta-layout[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center}.parchment-card[_ngcontent-%COMP%]{max-width:350px;margin:0 auto}input.input-medieval[_ngcontent-%COMP%]{flex:1;margin-bottom:1rem}.button-medieval[_ngcontent-%COMP%]{width:100%;margin-top:1rem}.login-error[_ngcontent-%COMP%]{color:#992e2e;font-weight:700;margin-bottom:1rem;text-align:center;font-family:MedievalSharp,serif}.input-icon-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.login-links[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1.5rem;margin-top:1.5rem;font-family:MedievalSharp,serif}.medieval-link[_ngcontent-%COMP%]{color:#7b5e3b;text-decoration:underline;cursor:pointer;font-weight:700;transition:color .2s}.medieval-link[_ngcontent-%COMP%]:hover{color:#a88d5a}.medieval-link-sep[_ngcontent-%COMP%]{color:#a67c52;font-weight:700;font-size:1.2em;margin:0 .2em;-webkit-user-select:none;user-select:none}"]})}}return t})()}}]);