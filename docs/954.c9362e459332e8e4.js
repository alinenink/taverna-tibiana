"use strict";(self.webpackChunktaverna_tibiana=self.webpackChunktaverna_tibiana||[]).push([[954],{4954:(v,r,i)=>{i.r(r),i.d(r,{AnalyticsTestComponent:()=>d});var c=i(177),t=i(4020),l=i(2210);let u=(()=>{class n{constructor(s){this.analyticsService=s}testDataLayerInitialization(){return typeof window<"u"&&window.dataLayer?(console.log("\u2705 DataLayer inicializado:",window.dataLayer),!0):(console.error("\u274c DataLayer n\xe3o encontrado"),!1)}testBasicEvents(){console.log("\u{1f9ea} Testando eventos b\xe1sicos..."),this.analyticsService.trackPageView("/test-page"),this.analyticsService.trackEvent("test_event",{test_param:"test_value",timestamp:(new Date).toISOString()}),this.analyticsService.trackUserAction("test_action","test_category","test_label",100),console.log("\u2705 Eventos b\xe1sicos testados")}testAuthEvents(){console.log("\u{1f9ea} Testando eventos de autentica\xe7\xe3o..."),this.analyticsService.trackLogin("email"),this.analyticsService.trackLogout(),this.analyticsService.trackRegistration("email"),console.log("\u2705 Eventos de autentica\xe7\xe3o testados")}testCalculatorEvents(){console.log("\u{1f9ea} Testando eventos de calculadora..."),this.analyticsService.trackCalculatorUsage("exercise-weapons",{vocation:"knight",skill:"melee",currentSkill:100,targetSkill:110}),this.analyticsService.trackCalculatorUsage("stamina",{currentStamina:3600,targetStamina:7200}),this.analyticsService.trackCalculatorUsage("charm-damage",{averageDamage:500,creatureHp:1e3,bonusResistance:0}),this.analyticsService.trackCalculatorUsage("loot-split",{session:"test-session-123"}),console.log("\u2705 Eventos de calculadora testados")}testConsultEvents(){console.log("\u{1f9ea} Testando eventos de consulta..."),this.analyticsService.trackCharacterConsultation("Aureleaf"),this.analyticsService.trackCharacterConsultation("TestCharacter"),console.log("\u2705 Eventos de consulta testados")}testMasteryEvents(){console.log("\u{1f9ea} Testando eventos de mastery..."),this.analyticsService.trackMasteryAction("select","Hard"),this.analyticsService.trackMasteryAction("deselect","Easy"),this.analyticsService.trackMasteryAction("upload","mastery-file.json"),this.analyticsService.trackMasteryAction("save","selected_masteries"),console.log("\u2705 Eventos de mastery testados")}testSimulationEvents(){console.log("\u{1f9ea} Testando eventos de simula\xe7\xe3o..."),this.analyticsService.trackSimulationUsage("tab_selection",{tab:"achievements"}),this.analyticsService.trackSimulationUsage("start",{charName:"TestChar",totalProgress:75}),this.analyticsService.trackSimulationUsage("export_json",{charName:"TestChar",totalProgress:80}),this.analyticsService.trackSimulationUsage("import_json",{}),this.analyticsService.trackSimulationUsage("import_success",{charName:"TestChar"}),console.log("\u2705 Eventos de simula\xe7\xe3o testados")}testFormEvents(){console.log("\u{1f9ea} Testando eventos de formul\xe1rio..."),this.analyticsService.trackFormSubmission("login",!0),this.analyticsService.trackFormSubmission("login",!1),this.analyticsService.trackFormSubmission("registration",!0),this.analyticsService.trackFormSubmission("registration",!1),this.analyticsService.trackFormSubmission("verification",!0),this.analyticsService.trackFormSubmission("password_recovery",!0),console.log("\u2705 Eventos de formul\xe1rio testados")}testButtonEvents(){console.log("\u{1f9ea} Testando eventos de bot\xe3o..."),this.analyticsService.trackButtonClick("help_modal","home"),this.analyticsService.trackButtonClick("navigate_simulation","home"),this.analyticsService.trackButtonClick("submit_calculator","calculators"),this.analyticsService.trackButtonClick("search_character","consult"),console.log("\u2705 Eventos de bot\xe3o testados")}testSearchEvents(){console.log("\u{1f9ea} Testando eventos de busca..."),this.analyticsService.trackSearch("Aureleaf","character"),this.analyticsService.trackSearch("Hard","mastery"),this.analyticsService.trackSearch("knight","calculator"),console.log("\u2705 Eventos de busca testados")}testErrorEvents(){console.log("\u{1f9ea} Testando eventos de erro..."),this.analyticsService.trackError("api_error","Network Error","Error stack trace"),this.analyticsService.trackError("validation_error","Invalid email format","Form validation"),this.analyticsService.trackError("import_error","File format not supported","JSON import"),console.log("\u2705 Eventos de erro testados")}testApiEvents(){console.log("\u{1f9ea} Testando eventos de API..."),this.analyticsService.trackApiCall("/auth/login","POST",200,1500),this.analyticsService.trackApiCall("/auction/Aureleaf","GET",200,800),this.analyticsService.trackApiCall("/calculators/exercise-weapons","POST",200,1200),this.analyticsService.trackApiCall("/auth/login","POST",401,500),this.analyticsService.trackApiCall("/auction/InvalidChar","GET",404,300),console.log("\u2705 Eventos de API testados")}testEngagementEvents(){console.log("\u{1f9ea} Testando eventos de engajamento..."),this.analyticsService.trackEngagement("scroll","home_page"),this.analyticsService.trackEngagement("click","calculator_button"),this.analyticsService.trackEngagement("hover","mastery_item"),console.log("\u2705 Eventos de engajamento testados")}runAllTests(){console.log("\u{1f680} Iniciando testes completos do Analytics..."),this.testDataLayerInitialization()?(this.testBasicEvents(),this.testAuthEvents(),this.testCalculatorEvents(),this.testConsultEvents(),this.testMasteryEvents(),this.testSimulationEvents(),this.testFormEvents(),this.testButtonEvents(),this.testSearchEvents(),this.testErrorEvents(),this.testApiEvents(),this.testEngagementEvents(),console.log("\u{1f389} Todos os testes conclu\xeddos!"),console.log("\u{1f4ca} Verifique o dataLayer no console para confirmar os eventos:"),console.log("window.dataLayer")):console.error("\u274c Falha na inicializa\xe7\xe3o do dataLayer")}checkDataLayerEvents(){if(typeof window<"u"&&window.dataLayer){console.log("\u{1f4ca} Eventos no dataLayer:",window.dataLayer),console.log("\u{1f4c8} Total de eventos:",window.dataLayer.length);const s={};window.dataLayer.forEach(o=>{o.event&&(s[o.event]=(s[o.event]||0)+1)}),console.log("\u{1f4cb} Contagem de eventos por tipo:",s)}else console.error("\u274c DataLayer n\xe3o dispon\xedvel")}clearDataLayer(){typeof window<"u"&&window.dataLayer&&(window.dataLayer=[],console.log("\u{1f9f9} DataLayer limpo para novos testes"))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(l.c))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),d=(()=>{class n{constructor(s){this.analyticsDebugService=s,this.dataLayerStatus=!1,this.totalEvents=0,this.lastTest="Nenhum",this.testStatus="Aguardando",this.checkDataLayer()}checkDataLayer(){this.dataLayerStatus=this.analyticsDebugService.testDataLayerInitialization(),this.updateEventCount()}runTest(s){switch(this.lastTest=s,this.testStatus="Executando...",s){case"basic":this.analyticsDebugService.testBasicEvents();break;case"auth":this.analyticsDebugService.testAuthEvents();break;case"calculator":this.analyticsDebugService.testCalculatorEvents();break;case"consult":this.analyticsDebugService.testConsultEvents();break;case"mastery":this.analyticsDebugService.testMasteryEvents();break;case"simulation":this.analyticsDebugService.testSimulationEvents();break;case"form":this.analyticsDebugService.testFormEvents();break;case"button":this.analyticsDebugService.testButtonEvents();break;case"search":this.analyticsDebugService.testSearchEvents();break;case"error":this.analyticsDebugService.testErrorEvents();break;case"api":this.analyticsDebugService.testApiEvents();break;case"engagement":this.analyticsDebugService.testEngagementEvents()}this.testStatus="Conclu\xeddo",this.updateEventCount()}runAllTests(){this.lastTest="Todos os Testes",this.testStatus="Executando...",this.analyticsDebugService.runAllTests(),this.testStatus="Conclu\xeddo",this.updateEventCount()}clearDataLayer(){this.analyticsDebugService.clearDataLayer(),this.updateEventCount(),this.testStatus="DataLayer Limpo"}showEventCounts(){this.analyticsDebugService.checkDataLayerEvents()}updateEventCount(){this.totalEvents=typeof window<"u"&&window.dataLayer?window.dataLayer.length:0}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(u))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-analytics-test"]],decls:79,vars:8,consts:[[1,"analytics-test-container"],[1,"test-section"],[1,"status-indicator"],[1,"test-btn",3,"click"],[1,"test-buttons"],[1,"test-btn","primary",3,"click"],[1,"test-btn","secondary",3,"click"],[1,"results"],[1,"result-item"],[1,"instructions"]],template:function(o,e){1&o&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"\u{1f9ea} Testes do Google Tag Manager"),t.k0s(),t.j41(3,"div",1)(4,"h3"),t.EFF(5,"Status do DataLayer"),t.k0s(),t.j41(6,"div",2),t.EFF(7),t.k0s(),t.j41(8,"button",3),t.bIt("click",function(){return e.checkDataLayer()}),t.EFF(9,"Verificar DataLayer"),t.k0s()(),t.j41(10,"div",1)(11,"h3"),t.EFF(12,"Testes Individuais"),t.k0s(),t.j41(13,"div",4)(14,"button",3),t.bIt("click",function(){return e.runTest("basic")}),t.EFF(15,"Eventos B\xe1sicos"),t.k0s(),t.j41(16,"button",3),t.bIt("click",function(){return e.runTest("auth")}),t.EFF(17,"Autentica\xe7\xe3o"),t.k0s(),t.j41(18,"button",3),t.bIt("click",function(){return e.runTest("calculator")}),t.EFF(19,"Calculadoras"),t.k0s(),t.j41(20,"button",3),t.bIt("click",function(){return e.runTest("consult")}),t.EFF(21,"Consulta"),t.k0s(),t.j41(22,"button",3),t.bIt("click",function(){return e.runTest("mastery")}),t.EFF(23,"Masteries"),t.k0s(),t.j41(24,"button",3),t.bIt("click",function(){return e.runTest("simulation")}),t.EFF(25,"Simula\xe7\xe3o"),t.k0s(),t.j41(26,"button",3),t.bIt("click",function(){return e.runTest("form")}),t.EFF(27,"Formul\xe1rios"),t.k0s(),t.j41(28,"button",3),t.bIt("click",function(){return e.runTest("button")}),t.EFF(29,"Bot\xf5es"),t.k0s(),t.j41(30,"button",3),t.bIt("click",function(){return e.runTest("search")}),t.EFF(31,"Busca"),t.k0s(),t.j41(32,"button",3),t.bIt("click",function(){return e.runTest("error")}),t.EFF(33,"Erros"),t.k0s(),t.j41(34,"button",3),t.bIt("click",function(){return e.runTest("api")}),t.EFF(35,"API"),t.k0s(),t.j41(36,"button",3),t.bIt("click",function(){return e.runTest("engagement")}),t.EFF(37,"Engajamento"),t.k0s()()(),t.j41(38,"div",1)(39,"h3"),t.EFF(40,"Teste Completo"),t.k0s(),t.j41(41,"button",5),t.bIt("click",function(){return e.runAllTests()}),t.EFF(42,"Executar Todos os Testes"),t.k0s(),t.j41(43,"button",6),t.bIt("click",function(){return e.clearDataLayer()}),t.EFF(44,"Limpar DataLayer"),t.k0s()(),t.j41(45,"div",1)(46,"h3"),t.EFF(47,"Resultados"),t.k0s(),t.j41(48,"div",7)(49,"div",8)(50,"strong"),t.EFF(51,"Total de Eventos:"),t.k0s(),t.EFF(52),t.k0s(),t.j41(53,"div",8)(54,"strong"),t.EFF(55,"\xdaltimo Teste:"),t.k0s(),t.EFF(56),t.k0s(),t.j41(57,"div",8)(58,"strong"),t.EFF(59,"Status:"),t.k0s(),t.EFF(60),t.k0s()(),t.j41(61,"button",3),t.bIt("click",function(){return e.showEventCounts()}),t.EFF(62,"Ver Contagem de Eventos"),t.k0s()(),t.j41(63,"div",1)(64,"h3"),t.EFF(65,"Instru\xe7\xf5es"),t.k0s(),t.j41(66,"div",9)(67,"p"),t.EFF(68,"1. Abra o console do navegador (F12)"),t.k0s(),t.j41(69,"p"),t.EFF(70,"2. Execute os testes desejados"),t.k0s(),t.j41(71,"p"),t.EFF(72,"3. Verifique os eventos no console"),t.k0s(),t.j41(73,"p"),t.EFF(74,"4. Use o Preview Mode do GTM para validar"),t.k0s(),t.j41(75,"p"),t.EFF(76,"5. Verifique o dataLayer: "),t.j41(77,"code"),t.EFF(78,"console.log(window.dataLayer)"),t.k0s()()()()()),2&o&&(t.R7$(6),t.AVh("success",e.dataLayerStatus)("error",!e.dataLayerStatus),t.R7$(),t.SpI(" ",e.dataLayerStatus?"\u2705 DataLayer Ativo":"\u274c DataLayer Inativo"," "),t.R7$(45),t.SpI(" ",e.totalEvents," "),t.R7$(4),t.SpI(" ",e.lastTest," "),t.R7$(4),t.SpI(" ",e.testStatus," "))},dependencies:[c.MD],styles:[".analytics-test-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:20px;background:#f5f5f5;border-radius:8px;font-family:Arial,sans-serif}h2[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:30px}h3[_ngcontent-%COMP%]{color:#555;margin-bottom:15px;border-bottom:2px solid #ddd;padding-bottom:5px}.test-section[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px;background:#fff;border-radius:6px;box-shadow:0 2px 4px #0000001a}.status-indicator[_ngcontent-%COMP%]{padding:10px;border-radius:4px;font-weight:700;margin-bottom:15px;text-align:center}.status-indicator.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.status-indicator.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.test-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;margin-bottom:15px}.test-btn[_ngcontent-%COMP%]{padding:10px 15px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:all .3s ease}.test-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0003}.test-btn.primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.test-btn.primary[_ngcontent-%COMP%]:hover{background:#0056b3}.test-btn.secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.test-btn.secondary[_ngcontent-%COMP%]:hover{background:#545b62}.test-btn[_ngcontent-%COMP%]:not(.primary):not(.secondary){background:#28a745;color:#fff}.test-btn[_ngcontent-%COMP%]:not(.primary):not(.secondary):hover{background:#1e7e34}.results[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px;border-radius:4px;margin-bottom:15px}.result-item[_ngcontent-%COMP%]{margin-bottom:8px}.instructions[_ngcontent-%COMP%]{background:#e7f3ff;padding:15px;border-radius:4px;border-left:4px solid #007bff}.instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#333}.instructions[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#f1f1f1;padding:2px 6px;border-radius:3px;font-family:monospace}"]})}}return n})()}}]);