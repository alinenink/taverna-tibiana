"use strict";(self.webpackChunktaverna_tibiana=self.webpackChunktaverna_tibiana||[]).push([[179],{4179:(F,f,d)=>{d.r(f),d.d(f,{WeaponDetailComponent:()=>T});var p=d(467),e=d(4020),_=d(177),v=d(4341),g=d(5085),u=d(4231),h=d(6706);function b(o,c){1&o&&(e.j41(0,"div",12)(1,"div",13),e.qSk(),e.j41(2,"svg",14),e.nrm(3,"g",15)(4,"g",16),e.j41(5,"g",17),e.nrm(6,"path",18),e.k0s()()()())}function x(o,c){1&o&&(e.j41(0,"div",19),e.EFF(1,"Carregando..."),e.k0s())}function k(o,c){if(1&o&&(e.j41(0,"div",20),e.EFF(1),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.JRh(n.error())}}function P(o,c){1&o&&(e.j41(0,"span"),e.EFF(1,"Salvar"),e.k0s())}function y(o,c){1&o&&(e.j41(0,"span"),e.EFF(1,"Salvando..."),e.k0s())}function w(o,c){1&o&&(e.j41(0,"span"),e.EFF(1,"Excluir"),e.k0s())}function M(o,c){1&o&&(e.j41(0,"span"),e.EFF(1,"Excluindo..."),e.k0s())}function C(o,c){if(1&o&&(e.j41(0,"div",38),e.EFF(1),e.k0s()),2&o){const n=e.XpG(3);e.AVh("success",n.saveSuccess())("error",!n.saveSuccess()),e.R7$(),e.SpI(" ",n.saveMessage()," ")}}function O(o,c){if(1&o&&(e.j41(0,"div",38),e.EFF(1),e.k0s()),2&o){const n=e.XpG(3);e.AVh("success",n.deleteSuccess())("error",!n.deleteSuccess()),e.R7$(),e.SpI(" ",n.deleteMessage()," ")}}function E(o,c){if(1&o&&(e.j41(0,"th",39),e.EFF(1),e.k0s()),2&o){const n=c.$implicit;e.R7$(),e.SpI(" N\xedvel ",n.level," ")}}function I(o,c){if(1&o){const n=e.RV6();e.j41(0,"div",52)(1,"img",53),e.bIt("error",function(t){e.eBV(n);const a=e.XpG(6);return e.Njj(a.onIconError(t))}),e.k0s(),e.j41(2,"img",54),e.bIt("error",function(t){e.eBV(n);const a=e.XpG(6);return e.Njj(a.onIconError(t))}),e.k0s()()}if(2&o){const n=e.XpG(2).$implicit,i=e.XpG(4);e.R7$(),e.Y8G("src",i.weaponsService.getIconAssetPath(n.icons[0]),e.B4B)("alt",n.title),e.R7$(),e.Y8G("src",i.weaponsService.getIconAssetPath(n.icons[1]),e.B4B)("alt",n.title)}}function D(o,c){if(1&o){const n=e.RV6();e.j41(0,"div",55)(1,"img",56),e.bIt("error",function(t){e.eBV(n);const a=e.XpG(6);return e.Njj(a.onIconError(t))}),e.k0s(),e.j41(2,"img",57),e.bIt("error",function(t){e.eBV(n);const a=e.XpG(6);return e.Njj(a.onIconError(t))}),e.k0s(),e.j41(3,"img",58),e.bIt("error",function(t){e.eBV(n);const a=e.XpG(6);return e.Njj(a.onIconError(t))}),e.k0s()()}if(2&o){const n=e.XpG(2).$implicit,i=e.XpG(4);e.R7$(),e.Y8G("src",i.weaponsService.getIconAssetPath(n.icons[1]),e.B4B)("alt",n.title),e.R7$(),e.Y8G("src",i.weaponsService.getIconAssetPath(n.icons[2]),e.B4B)("alt",n.title),e.R7$(),e.Y8G("src",i.weaponsService.getIconAssetPath(n.icons[0]),e.B4B)("alt",n.title)}}function S(o,c){if(1&o){const n=e.RV6();e.j41(0,"div",59)(1,"img",60),e.bIt("error",function(t){e.eBV(n);const a=e.XpG(6);return e.Njj(a.onIconError(t))}),e.k0s()()}if(2&o){const n=e.XpG(2).$implicit,i=e.XpG(4);e.R7$(),e.Y8G("src",i.weaponsService.getIconAssetPath(n.icons[0]),e.B4B)("alt",n.title)}}function j(o,c){if(1&o&&(e.j41(0,"div",48),e.DNE(1,I,3,4,"div",49)(2,D,4,6,"div",50)(3,S,2,2,"div",51),e.k0s()),2&o){const n=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",2===n.icons.length),e.R7$(),e.Y8G("ngIf",3===n.icons.length),e.R7$(),e.Y8G("ngIf",1===n.icons.length)}}function A(o,c){1&o&&(e.j41(0,"div",61),e.EFF(1,"\u2694\ufe0f"),e.k0s())}function W(o,c){if(1&o){const n=e.RV6();e.j41(0,"div",43)(1,"div",44),e.DNE(2,j,4,3,"div",45)(3,A,2,0,"div",46),e.k0s(),e.j41(4,"div",47),e.bIt("click",function(){const t=e.eBV(n),a=t.$implicit,r=t.index,s=e.XpG().$implicit,l=e.XpG(3);return e.Njj(l.onPerkSelect(s,a,r))}),e.EFF(5),e.k0s()()}if(2&o){const n=c.$implicit;e.AVh("disabled-perk",!n.enabled)("selected-perk",n.selected),e.R7$(),e.Y8G("title",n.title),e.R7$(),e.Y8G("ngIf",n.icons&&n.icons.length>0),e.R7$(),e.Y8G("ngIf",!n.icons||0===n.icons.length),e.R7$(),e.AVh("selected-perk",n.selected)("disabled-perk",!n.enabled),e.R7$(),e.SpI(" ",n.description," ")}}function G(o,c){if(1&o&&(e.j41(0,"td",40)(1,"div",41),e.DNE(2,W,6,12,"div",42),e.k0s()()),2&o){const n=c.$implicit;e.BMQ("data-level",n.level),e.R7$(2),e.Y8G("ngForOf",n.perks)}}function R(o,c){if(1&o){const n=e.RV6();e.j41(0,"div",26)(1,"div",27)(2,"h2"),e.EFF(3,"Profici\xeancias por N\xedvel"),e.k0s(),e.j41(4,"div",28)(5,"span",29),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(!t.saving()&&!t.deleting()&&t.salvarSelecionados())}),e.nrm(6,"img",30),e.DNE(7,P,2,0,"span",31)(8,y,2,0,"span",31),e.k0s(),e.j41(9,"span",32),e.bIt("click",function(){e.eBV(n);const t=e.XpG(2);return e.Njj(!t.saving()&&!t.deleting()&&t.confirmarExclusao())}),e.nrm(10,"img",33),e.DNE(11,w,2,0,"span",31)(12,M,2,0,"span",31),e.k0s()()(),e.DNE(13,C,2,5,"div",34)(14,O,2,5,"div",34),e.j41(15,"table",35)(16,"thead")(17,"tr"),e.DNE(18,E,2,1,"th",36),e.k0s()(),e.j41(19,"tbody")(20,"tr"),e.DNE(21,G,3,2,"td",37),e.k0s()()()()}if(2&o){let n,i;const t=e.XpG(2);e.R7$(5),e.AVh("loading",t.saving())("disabled",t.saving()||t.deleting()),e.R7$(2),e.Y8G("ngIf",!t.saving()),e.R7$(),e.Y8G("ngIf",t.saving()),e.R7$(),e.AVh("loading",t.deleting())("disabled",t.saving()||t.deleting()),e.R7$(2),e.Y8G("ngIf",!t.deleting()),e.R7$(),e.Y8G("ngIf",t.deleting()),e.R7$(),e.Y8G("ngIf",t.saveMessage()),e.R7$(),e.Y8G("ngIf",t.deleteMessage()),e.R7$(4),e.Y8G("ngForOf",null==(n=t.weapon())?null:n.levels),e.R7$(3),e.Y8G("ngForOf",null==(i=t.weapon())?null:i.levels)}}function $(o,c){if(1&o&&(e.j41(0,"div",21)(1,"div",22)(2,"span",23),e.EFF(3,"Arma Selecionada:"),e.k0s(),e.j41(4,"span",24),e.EFF(5),e.k0s()(),e.DNE(6,R,22,16,"div",25),e.k0s()),2&o){let n;const i=e.XpG();e.R7$(5),e.JRh(null==(n=i.weapon())?null:n.name),e.R7$(),e.Y8G("ngIf",i.hasProficiencies)}}let T=(()=>{class o{constructor(n,i,t,a){this.route=n,this.router=i,this.weaponsService=t,this.proficiencyApiService=a,this.weapon=(0,e.vPA)(null),this.loading=(0,e.vPA)(!0),this.error=(0,e.vPA)(null),this.selectedPerks=(0,e.vPA)({}),this.saving=(0,e.vPA)(!1),this.saveMessage=(0,e.vPA)(null),this.saveSuccess=(0,e.vPA)(!1),this.deleting=(0,e.vPA)(!1),this.deleteMessage=(0,e.vPA)(null),this.deleteSuccess=(0,e.vPA)(!1)}ngOnInit(){this.route.params.subscribe(n=>{this.loadWeaponDetail(n.category,n.name)})}loadWeaponDetail(n,i){this.loading.set(!0),this.error.set(null),this.weaponsService.getWeaponDetails(n,decodeURIComponent(i)).subscribe({next:t=>{if(t.success&&t.weapon){const a={name:t.weapon.name,category:t.category.id,image_url:`assets/itens/${t.weapon.name}.webp`,levels:this.convertProficiencyLevels(t.weapon.proficiency?.levels||[])};this.weapon.set(a),this.loadSavedPerks(a.name,a.category)}else this.error.set(t.message||"Erro ao carregar detalhes da arma");this.loading.set(!1)},error:t=>{console.error("Erro ao carregar detalhes da arma:",t),this.error.set("Erro ao carregar detalhes da arma. Tente novamente."),this.loading.set(!1)}})}generateWeaponLevels(){return[{level:1,perks:[{icons:["32_11345f84"],description:"Aumenta o dano m\xe1gico",title:"+1% de dano m\xe1gico"}]},{level:2,perks:[{icons:["32_11345f84"],description:"Aumenta o dano m\xe1gico",title:"+2% de dano m\xe1gico"},{icons:["32_9e923ff4"],description:"Aumenta chance de cr\xedtico",title:"+1% de chance de cr\xedtico"}]},{level:3,perks:[{icons:["32_11345f84"],description:"Aumenta o dano m\xe1gico",title:"+3% de dano m\xe1gico"},{icons:["32_9e923ff4"],description:"Aumenta chance de cr\xedtico",title:"+2% de chance de cr\xedtico"}]},{level:4,perks:[{icons:["32_11345f84"],description:"Aumenta o dano m\xe1gico",title:"+4% de dano m\xe1gico"},{icons:["32_9e923ff4"],description:"Aumenta chance de cr\xedtico",title:"+3% de chance de cr\xedtico"},{icons:["32_3d470603"],description:"Aumenta velocidade de cast",title:"+1% de velocidade de cast"}]},{level:5,perks:[{icons:["32_11345f84"],description:"Aumenta o dano m\xe1gico",title:"+5% de dano m\xe1gico"},{icons:["32_9e923ff4"],description:"Aumenta chance de cr\xedtico",title:"+4% de chance de cr\xedtico"},{icons:["32_3d470603"],description:"Aumenta velocidade de cast",title:"+2% de velocidade de cast"}]},{level:6,perks:[{icons:["32_11345f84"],description:"Aumenta o dano m\xe1gico",title:"+6% de dano m\xe1gico"},{icons:["32_9e923ff4"],description:"Aumenta chance de cr\xedtico",title:"+5% de chance de cr\xedtico"},{icons:["32_3d470603"],description:"Aumenta velocidade de cast",title:"+3% de velocidade de cast"},{icons:["32_079dabfd"],description:"Aumenta resist\xeancia m\xe1gica",title:"+1% de resist\xeancia m\xe1gica"}]},{level:7,perks:[{icons:["32_11345f84"],description:"Aumenta o dano m\xe1gico",title:"+7% de dano m\xe1gico"},{icons:["32_9e923ff4"],description:"Aumenta chance de cr\xedtico",title:"+6% de chance de cr\xedtico"},{icons:["32_3d470603"],description:"Aumenta velocidade de cast",title:"+4% de velocidade de cast"},{icons:["32_079dabfd"],description:"Aumenta resist\xeancia m\xe1gica",title:"+2% de resist\xeancia m\xe1gica"},{icons:["32_11345f84"],description:"Habilidade especial",title:"Habilidade especial: Sanguine Burst"}]}]}convertProficiencyLevels(n){return n&&0!==n.length?n.map((i,t)=>({level:i.level,perks:(i.perks||[]).map((a,r)=>({...a,enabled:0===t,selected:!1})),selectedPerk:void 0})):this.generateWeaponLevels()}onPerkSelect(n,i,t){if(!i.enabled)return;const a=this.weapon();if(!a)return;const r=a.levels.findIndex(s=>s.level===n.level);-1!==r&&(i.selected?(i.selected=!1,n.selectedPerk=void 0,this.disableSubsequentLevels(r)):(n.perks.forEach(s=>s.selected=!1),i.selected=!0,n.selectedPerk=i.description,this.enableNextLevel(r)),this.weapon.set({...a}))}disableSubsequentLevels(n){const i=this.weapon();if(i)for(let t=n+1;t<i.levels.length;t++){const a=i.levels[t];a.selectedPerk=void 0,a.perks.forEach(r=>{r.enabled=!1,r.selected=!1})}}enableNextLevel(n){const i=this.weapon();i&&n+1<i.levels.length&&i.levels[n+1].perks.forEach(a=>{a.enabled=!0})}hasSelectedPerks(){const n=this.weapon();return!!n&&n.levels.some(i=>i.perks.some(t=>t.selected))}salvarSelecionados(){var n=this;return(0,p.A)(function*(){const i=n.weapon();if(i){if(!n.hasSelectedPerks())return n.saveMessage.set("Selecione pelo menos uma profici\xeancia antes de salvar."),n.saveSuccess.set(!1),void n.clearSaveMessage();n.saving.set(!0),n.saveMessage.set(null);try{const t=i.levels.map(s=>({level:s.level,selectedPerks:s.perks.filter(l=>l.selected).map(l=>({icons:l.icons,description:l.description,title:l.title}))})).filter(s=>s.selectedPerks.length>0),a={weapon:{name:i.name,category:i.category,image_url:i.image_url},selectedPerks:t,createdAt:(new Date).toISOString(),version:"1.0"},r=yield n.proficiencyApiService.save(a);r.success?(n.saveMessage.set(r.message||"Profici\xeancia salva com sucesso!"),n.saveSuccess.set(!0),console.log("Build salvo na API:",r.data)):(n.saveMessage.set("Erro ao salvar: "+(r.message||"Erro desconhecido")),n.saveSuccess.set(!1))}catch(t){console.error("Erro ao salvar profici\xeancia:",t),n.saveMessage.set("Erro de conex\xe3o. Verifique sua internet e tente novamente."),n.saveSuccess.set(!1)}finally{n.saving.set(!1),n.clearSaveMessage()}}})()}loadSavedPerks(n,i){var t=this;return(0,p.A)(function*(){try{const a=yield t.proficiencyApiService.get(n,i);if(a.success&&a.data){const r=a.data.proficiency_data;r&&r.selectedPerks&&(t.applySavedPerks(r.selectedPerks),console.log("Perks carregadas:",r.selectedPerks))}}catch{console.log("Nenhuma profici\xeancia salva encontrada para esta arma")}})()}applySavedPerks(n){const i=this.weapon();i&&(i.levels.forEach(t=>{t.perks.forEach(a=>{a.selected=!1,a.enabled=1===t.level}),t.selectedPerk=void 0}),n.forEach(t=>{const a=i.levels.find(r=>r.level===t.level);if(a&&t.selectedPerks.length>0){a.perks.forEach(s=>s.enabled=!0),t.selectedPerks.forEach(s=>{const l=a.perks.find(m=>m.description===s.description&&m.title===s.title);l&&(l.selected=!0,a.selectedPerk=l.description)});const r=i.levels.findIndex(s=>s.level===t.level);-1!==r&&r+1<i.levels.length&&i.levels[r+1].perks.forEach(l=>l.enabled=!0)}}),this.weapon.set({...i}))}clearSaveMessage(){setTimeout(()=>{this.saveMessage.set(null),this.saveSuccess.set(!1)},4e3)}voltarParaLista(){const n=this.route.snapshot.queryParams,i=n.from,t=n.category;"saved-weapons"===i?this.router.navigate(["/weapons"],{queryParams:{showSaved:"true"}}):"category-list"===i&&t?this.router.navigate(["/weapons"],{queryParams:{category:t,showList:"true"}}):this.router.navigate(["/weapons"])}getWeaponImagePath(n){if(!n)return null;const i=n.replace(/^local:\/\//,"");return i.endsWith(".webp")||i.endsWith(".gif")?i.endsWith(".gif")?`assets/sprites/loot/${i}`:`assets/itens/${i}`:`assets/itens/${i}.webp`}onImageError(n){console.warn("Erro ao carregar imagem da arma:",n),n.target.style.display="none"}getCategoryDisplayName(n){return{swords:"Espadas",axes:"Machados",clavas:"Clavas",ranged:"Armas de Longo Alcance",rods:"Rods",wands:"Wands",fist:"Armas de Punho"}[n]||n}get hasProficiencies(){const n=this.weapon();return!!(n?.levels&&n.levels.length>0)}onIconError(n){console.warn("Erro ao carregar \xedcone da profici\xeancia:",n),n.target.style.display="none"}confirmarExclusao(){var n=this;return(0,p.A)(function*(){if(!n.weapon())return;const i=n.weapon().name,t=n.weapon().category;confirm(`Tem certeza que deseja excluir a profici\xeancia salva para "${i}"?\n\nEsta a\xe7\xe3o n\xe3o pode ser desfeita.`)&&(yield n.excluirProficiencia(i,t))})()}excluirProficiencia(n,i){var t=this;return(0,p.A)(function*(){t.deleting.set(!0),t.deleteMessage.set(null),t.deleteSuccess.set(!1);try{console.log(`Iniciando exclus\xe3o da profici\xeancia: ${n} (${i})`);const a=yield t.proficiencyApiService.delete(n,i);a.success?(console.log("\u2705 Profici\xeancia deletada com sucesso:",a),t.deleteSuccess.set(!0),t.deleteMessage.set("Profici\xeancia exclu\xedda com sucesso!"),t.selectedPerks.set({}),yield t.loadSavedPerks(n,i),setTimeout(()=>{t.clearDeleteMessage()},3e3)):(console.error("\u274c Erro ao deletar profici\xeancia:",a),t.deleteSuccess.set(!1),t.deleteMessage.set(a.message||"Erro ao excluir profici\xeancia"),setTimeout(()=>{t.clearDeleteMessage()},5e3))}catch(a){console.error("\u274c Erro de rede ao deletar profici\xeancia:",a),t.deleteSuccess.set(!1),t.deleteMessage.set("Erro de conex\xe3o ao excluir profici\xeancia. Tente novamente."),setTimeout(()=>{t.clearDeleteMessage()},5e3)}finally{t.deleting.set(!1)}})()}clearDeleteMessage(){this.deleteMessage.set(null),this.deleteSuccess.set(!1)}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(g.nX),e.rXU(g.Ix),e.rXU(u.T),e.rXU(h.T))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-weapon-detail"]],decls:14,vars:4,consts:[["class","svg-loader-overlay",4,"ngIf"],[1,"page-title"],[1,"title-content"],["src","assets/icons-svg/mastery.svg","alt","Maestria",1,"title-icon"],[1,"medieval-title"],[1,"parchment-background"],[1,"weapon-detail-container"],[1,"weapon-detail-header"],[1,"back-btn",3,"click"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],["class","weapon-detail-body",4,"ngIf"],[1,"svg-loader-overlay"],[1,"svg-loader"],["fill","#000000","height","200px","width","200px","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 452.022 452.022",0,"xml","space","preserve"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["d","M440.761,380.351l-50.512-50.512l24.481-24.481c3.905-3.905,3.905-10.237,0-14.143c-3.905-3.904-10.237-3.904-14.143,0 l-9.494,9.494l-42.368-42.368c6.562-23.401,9.894-47.59,9.894-72l-0.001-153.69c0-4.777-3.379-8.887-8.065-9.811 c-113.629-22.402-228.859-22.402-342.488,0C3.379,23.764,0,27.875,0,32.652v153.69c0,55.105,16.721,108.08,48.356,153.2 c31.635,45.119,75.739,78.897,127.545,97.681c1.101,0.399,2.255,0.599,3.409,0.599c1.154,0,2.308-0.2,3.41-0.599 c40.392-14.651,76.722-38.923,105.694-70.5l18.334,18.334l-9.494,9.494c-3.905,3.905-3.905,10.237,0,14.143 c1.953,1.953,4.512,2.929,7.071,2.929c2.559,0,5.119-0.977,7.071-2.929l24.481-24.481l50.512,50.512 c7.262,7.261,16.917,11.26,27.187,11.26s19.924-3.999,27.186-11.26c7.262-7.262,11.261-16.917,11.261-27.186 C452.022,397.268,448.023,387.613,440.761,380.351z"],[1,"loading"],[1,"error"],[1,"weapon-detail-body"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","proficiencies",4,"ngIf"],[1,"proficiencies"],[1,"proficiencies-header"],[1,"action-buttons"],[1,"acao-item",3,"click"],["src","assets/icons-svg/floppy-disk.svg","alt","Salvar",1,"svg-button"],[4,"ngIf"],[1,"acao-item","delete-btn",3,"click"],["src","assets/icons-svg/eraser.svg","alt","Excluir",1,"svg-button"],["class","save-feedback",3,"success","error",4,"ngIf"],[1,"weapon_proficiency_table"],["class","proficiency-level-header",4,"ngFor","ngForOf"],["class","proficiency-level-cell",4,"ngFor","ngForOf"],[1,"save-feedback"],[1,"proficiency-level-header"],[1,"proficiency-level-cell"],[1,"weapon_proficiency_block","weapon_proficiency_border"],["class","perk-block",3,"disabled-perk","selected-perk",4,"ngFor","ngForOf"],[1,"perk-block"],[1,"weapon_proficiency_icon",3,"title"],["class","icon-container",4,"ngIf"],["class","proficiency-icon-placeholder",4,"ngIf"],[1,"weapon_proficiency_text","weapon_proficiency_border",3,"click"],[1,"icon-container"],["class","two-icons-layout",4,"ngIf"],["class","three-icons-layout",4,"ngIf"],["class","single-icon-layout",4,"ngIf"],[1,"two-icons-layout"],[1,"proficiency-icon","icon-first",3,"error","src","alt"],[1,"proficiency-icon","icon-second",3,"error","src","alt"],[1,"three-icons-layout"],[1,"proficiency-icon","background-icon",3,"error","src","alt"],[1,"proficiency-icon","final-icon",3,"error","src","alt"],[1,"proficiency-icon","corner-icon-small",3,"error","src","alt"],[1,"single-icon-layout"],[1,"proficiency-icon","single-icon",3,"error","src","alt"],[1,"proficiency-icon-placeholder"]],template:function(i,t){1&i&&(e.DNE(0,b,7,0,"div",0),e.j41(1,"div",1)(2,"div",2),e.nrm(3,"img",3),e.j41(4,"h1",4),e.EFF(5,"Maestrias j\xe1 conquistadas"),e.k0s()()(),e.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"button",8),e.bIt("click",function(){return t.voltarParaLista()}),e.EFF(10,"Voltar"),e.k0s()(),e.DNE(11,x,2,0,"div",9)(12,k,2,1,"div",10)(13,$,7,2,"div",11),e.k0s()()),2&i&&(e.Y8G("ngIf",t.loading()),e.R7$(11),e.Y8G("ngIf",t.loading()),e.R7$(),e.Y8G("ngIf",t.error()),e.R7$(),e.Y8G("ngIf",t.weapon()))},dependencies:[_.MD,_.Sq,_.bT,v.YN,g.iI],styles:['@charset "UTF-8";.parchment-background[_ngcontent-%COMP%]{background:#fdf8e4;min-height:100vh;padding:0 0 2rem}.weapon-detail-container[_ngcontent-%COMP%]{max-width:96vw;width:100vw;margin:2rem auto;background:#fdf8e4;border-radius:16px;border:2px solid #a07947;box-shadow:0 4px 24px #a0794714;padding:2rem}.weapon-detail-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:1rem;margin-bottom:2rem}.weapon-detail-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:MedievalSharp,serif;color:#3e2f1c;font-size:2.2rem;margin:0}.back-btn[_ngcontent-%COMP%]{background:#d4c292;border:1.5px solid #a07947;border-radius:8px;padding:.5rem 1.5rem;font-family:MedievalSharp,serif;color:#3e2f1c;font-size:1.1rem;cursor:pointer;margin-right:1rem;transition:background .2s}.back-btn[_ngcontent-%COMP%]:hover{background:#c2a36e}.page-title[_ngcontent-%COMP%]{background:#fdf8e4;padding:2rem 0 1rem;text-align:center;border-bottom:2px solid #a07947;margin-bottom:0}.title-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.75rem}.title-icon[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;filter:brightness(0) saturate(100%) invert(27%) sepia(51%) saturate(2878%) hue-rotate(346deg) brightness(104%) contrast(97%)}.medieval-title[_ngcontent-%COMP%]{font-family:MedievalSharp,serif;color:#3e2f1c;font-size:2.5rem;margin:0;text-shadow:2px 2px 4px rgba(160,121,71,.4);letter-spacing:1px}.proficiencies-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;width:100%}.proficiencies-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;flex:1}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center}.acao-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;padding:.5rem 1rem;background:#f8f4e6;border:1px solid #d4c292;border-radius:8px;font-family:MedievalSharp,serif;color:#3e2f1c;font-size:1rem;transition:all .2s ease;width:fit-content}.acao-item[_ngcontent-%COMP%]:hover:not(.disabled){background:#e8d9a5;transform:translateY(-1px);box-shadow:0 2px 8px #a0794733}.acao-item[_ngcontent-%COMP%]:active:not(.disabled){transform:translateY(0)}.acao-item.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.acao-item.loading[_ngcontent-%COMP%]{background:#e8d9a5}.acao-item.loading[_ngcontent-%COMP%]   .svg-button[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}.acao-item.delete-btn[_ngcontent-%COMP%]{background:#f8e6e6;border-color:#d4a5a5;color:#8b2a2a}.acao-item.delete-btn[_ngcontent-%COMP%]:hover:not(.disabled){background:#f0d4d4;border-color:#c29595}.acao-item.delete-btn[_ngcontent-%COMP%]:active:not(.disabled){background:#e8c2c2}.acao-item.delete-btn.loading[_ngcontent-%COMP%]{background:#f0d4d4}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.save-feedback[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:8px;font-family:MedievalSharp,serif;font-size:1rem;margin-bottom:1rem;border:1px solid;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.save-feedback.success[_ngcontent-%COMP%]{background:#d4edda;border-color:#c3e6cb;color:#155724}.save-feedback.error[_ngcontent-%COMP%]{background:#f8d7da;border-color:#f5c6cb;color:#721c24}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.svg-button[_ngcontent-%COMP%]{width:20px;height:20px;filter:brightness(0) saturate(100%) invert(25%) sepia(15%) saturate(25%) hue-rotate(15deg) brightness(95%) contrast(90%)}.weapon-detail-body[_ngcontent-%COMP%]{margin-top:1.5rem}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;gap:2rem;padding:.75rem 0;border-bottom:1px solid #ddd;font-size:1.1rem}.detail-label[_ngcontent-%COMP%]{font-weight:700;color:#7b5e3b;font-family:MedievalSharp,serif}.detail-value[_ngcontent-%COMP%]{font-weight:700;color:#2e7d32;font-family:MedievalSharp,serif}.proficiencies[_ngcontent-%COMP%]{margin-top:2rem;padding:0;background:transparent;border-radius:0;border:none}.proficiencies[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#7b5e3b;font-family:MedievalSharp,serif;margin-top:0}.weapon_proficiency_table[_ngcontent-%COMP%]{width:100%;display:table;table-layout:fixed;border-collapse:collapse;margin-top:1.5rem}.proficiency-level-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4c292,#c2a36e);color:#3e2f1c;font-family:MedievalSharp,serif;font-weight:700;padding:1rem;border:2px solid #a07947;text-align:center;font-size:1.2em}.proficiency-level-cell[_ngcontent-%COMP%]{vertical-align:top;padding:.5rem 1.15rem;border:1px solid #a07947;background:#fffbe9;min-width:99px}.weapon_proficiency_block[_ngcontent-%COMP%]{background:#fdf8e4;border:2px solid #a07947;border-radius:8px;min-height:120px}.weapon_proficiency_border[_ngcontent-%COMP%]{border:1px solid #a07947}.perk-block[_ngcontent-%COMP%]{margin-bottom:1rem;padding:.5rem;background:#fdf6e3;border:1.5px solid #e8d9a5;border-radius:10px;box-shadow:0 1px 4px #a0794712;min-width:88px;cursor:pointer}.perk-block[_ngcontent-%COMP%]:last-child{margin-bottom:0}.weapon_proficiency_icon[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;width:40px;height:40px;margin-bottom:.75rem;margin-left:auto;margin-right:auto}.icon-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.two-icons-layout[_ngcontent-%COMP%]{position:relative;width:40px;height:40px}.icon-first[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:40px;height:40px;object-fit:contain;border-radius:8px;border:2px solid #d4c292;box-shadow:0 2px 8px #a0794726;background:#fffbe9;z-index:10;transition:transform .2s ease}.icon-second[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:40px;height:40px;object-fit:contain;border-radius:8px;border:2px solid #d4c292;box-shadow:0 2px 8px #a0794726;background:transparent;z-index:20;transition:transform .2s ease}.three-icons-layout[_ngcontent-%COMP%]{position:relative;width:40px;height:40px}.background-icon[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:40px;height:40px;object-fit:contain;border-radius:8px;border:2px solid #d4c292;box-shadow:0 2px 8px #a0794726;background:#fffbe9;z-index:10;transition:transform .2s ease}.final-icon[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:40px;height:40px;object-fit:contain;border-radius:8px;border:2px solid #d4c292;box-shadow:0 2px 8px #a0794726;background:transparent;z-index:20;transition:transform .2s ease}.corner-icon-small[_ngcontent-%COMP%]{position:absolute;top:-17px;right:-20px;width:6px;height:6px;object-fit:contain;border-radius:1px;border:1px solid #d4c292;box-shadow:0 1px 2px #a0794733;background:#fffbe9;z-index:30;transform:scale(.4)}.single-icon-layout[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.single-icon[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:contain;border-radius:8px;border:2px solid #d4c292;box-shadow:0 2px 8px #a0794726;background:#fffbe9;transition:transform .2s ease}.proficiency-icon-placeholder[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;border-radius:8px;border:2px solid #d4c292;box-shadow:0 2px 8px #a0794726;background:#fffbe9;transition:transform .2s ease}.proficiency-icon[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:contain;border-radius:8px;border:2px solid #d4c292;box-shadow:0 2px 8px #a0794726;background:#fffbe9;transition:transform .2s ease}.weapon_proficiency_text[_ngcontent-%COMP%]{font-family:Georgia,serif;color:#3e2f1c;font-size:1em;line-height:1.4;font-weight:500;padding:.5rem;background:#fffbe9;border-radius:6px;border:1px solid #d4c292;text-align:center;margin-top:.5rem;cursor:pointer}.weapon_proficiency_text.selected-perk[_ngcontent-%COMP%]{background:#e8f5e8;border-color:#2e7d32;box-shadow:0 2px 8px #2e7d3233;color:#2e7d32;font-weight:700}.perk-block.disabled-perk[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.weapon_proficiency_text.disabled-perk[_ngcontent-%COMP%]{background:#f5f5f5;border-color:#ccc;color:#999;cursor:not-allowed;opacity:.6}.perk-block.disabled-perk[_ngcontent-%COMP%]   .proficiency-icon[_ngcontent-%COMP%]{opacity:.4;filter:grayscale(100%)}.save-section[_ngcontent-%COMP%]{text-align:center;margin-top:2rem}.save-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:1rem 2rem;background:linear-gradient(135deg,#4caf50,#45a049);border:2px solid #2e7d32;border-radius:8px;font-family:MedievalSharp,serif;color:#fff;cursor:pointer;font-size:1.1rem;font-weight:700;transition:all .2s ease}.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#45a049,#388e3c);transform:translateY(-2px);box-shadow:0 4px 12px #4caf504d}.save-btn[_ngcontent-%COMP%]:disabled{background:#ccc;border-color:#999;color:#666;cursor:not-allowed;transform:none;box-shadow:none}.save-btn[_ngcontent-%COMP%]   .svg-icon[_ngcontent-%COMP%]{width:1.2em;height:1.2em}@media (max-width: 1240px){.weapon-detail-container[_ngcontent-%COMP%]{width:90vw;max-width:90vw;padding:1.5rem}.weapon_proficiency_table[_ngcontent-%COMP%]{display:block}.weapon_proficiency_table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.weapon_proficiency_table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block}.weapon_proficiency_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:2rem}.proficiency-level-cell[_ngcontent-%COMP%]{display:block;width:96%;margin-bottom:1rem;border:2px solid #a07947;border-radius:8px;position:relative}.proficiency-level-cell[_ngcontent-%COMP%]:before{content:attr(data-level);position:absolute;top:-10px;left:10px;background:linear-gradient(135deg,#d4c292,#c2a36e);color:#3e2f1c;font-family:MedievalSharp,serif;font-weight:700;padding:.25rem .75rem;border:2px solid #a07947;border-radius:12px;font-size:.9em;z-index:10}.weapon_proficiency_block[_ngcontent-%COMP%]{padding-top:1.5rem}.perk-block[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:.75rem;padding:.75rem;min-width:auto}.weapon_proficiency_icon[_ngcontent-%COMP%]{flex-shrink:0;margin:0}.weapon_proficiency_text[_ngcontent-%COMP%]{flex:1;margin:0;text-align:left}}@media (max-width: 768px){.weapon-detail-container[_ngcontent-%COMP%]{width:95vw;max-width:95vw;margin:1rem;padding:1rem}.weapon-detail-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.weapon_proficiency_table[_ngcontent-%COMP%]{display:block}.weapon_proficiency_table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.weapon_proficiency_table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block}.weapon_proficiency_table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:1.5rem}.proficiency-level-cell[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:.75rem;border:2px solid #a07947;border-radius:8px;position:relative;padding:.5rem}.proficiency-level-cell[_ngcontent-%COMP%]:before{content:attr(data-level);position:absolute;top:-8px;left:8px;background:linear-gradient(135deg,#d4c292,#c2a36e);color:#3e2f1c;font-family:MedievalSharp,serif;font-weight:700;padding:.2rem .6rem;border:2px solid #a07947;border-radius:10px;font-size:.8em;z-index:10}.weapon_proficiency_block[_ngcontent-%COMP%]{padding-top:1.2rem;padding:.5rem}.perk-block[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem;padding:.5rem;min-width:auto}.weapon_proficiency_icon[_ngcontent-%COMP%]{flex-shrink:0;margin:0;width:32px;height:32px}.proficiency-icon-placeholder[_ngcontent-%COMP%]{width:32px;height:32px}.weapon_proficiency_text[_ngcontent-%COMP%]{flex:1;margin:0;text-align:left;font-size:.9em;padding:.4em}.save-btn[_ngcontent-%COMP%]{padding:.8rem 1.5rem;font-size:1rem}}']})}}return o})()}}]);